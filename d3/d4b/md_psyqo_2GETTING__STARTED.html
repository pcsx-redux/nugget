<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nugget: Visual Studio Code extension</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nugget
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Visual Studio Code extension</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md52"></a>The easiest to get started with PSYQo, and with development on the PlayStation 1 in general, is through a <a href="https://code.visualstudio.com/">Visual Studio Code</a> extension. You can <a href="https://marketplace.visualstudio.com/items?itemName=grumpycoders.psx-dev">find it in the marketplace</a>, and <a href="https://youtu.be/KbAv-Ao7lzU">watch a video</a> to see how to use it.</p>
<h1><a class="anchor" id="autotoc_md53"></a>
The toolchain</h1>
<p>In order to develop for the PlayStation1 using the PSYQo library, a modern C++ toolchain is required. There are several different toolchains available for the PS1, but the PSYQo library is designed to work with at least gcc 10 targeting mips I. Here are some installation methods available:</p>
<h2><a class="anchor" id="autotoc_md54"></a>
Linux</h2>
<h3><a class="anchor" id="autotoc_md55"></a>
Debian derivatives:</h3>
<div class="fragment"><div class="line">sudo apt-get install -y make g++-mipsel-linux-gnu</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md56"></a>
Arch derivatives:</h3>
<p>The mipsel environment can be installed from <a href="https://wiki.archlinux.org/index.php/Aur">AUR</a> : <a href="https://aur.archlinux.org/packages/cross-mipsel-linux-gnu-binutils/">cross-mipsel-linux-gnu-binutils</a> and <a href="https://aur.archlinux.org/packages/cross-mipsel-linux-gnu-gcc/">cross-mipsel-linux-gnu-gcc</a> using your <a href="https://wiki.archlinux.org/index.php/AUR_helpers">AURhelper</a> of choice:</p>
<div class="fragment"><div class="line">trizen -S cross-mipsel-linux-gnu-binutils cross-mipsel-linux-gnu-gcc</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md57"></a>
All other flavors of Unix environments:</h3>
<p><a href="https://github.com/grumpycoders/pcsx-redux/blob/main/tools/linux-mips/spawn-compiler.sh">This script</a> will spawn a working mips toolchain.</p>
<h2><a class="anchor" id="autotoc_md58"></a>
MacOS</h2>
<p>Using <a href="https://brew.sh/">Homebrew</a>, you can install the mips toolchain after downloading <a href="https://github.com/grumpycoders/pcsx-redux/tree/main/tools/macos-mips">these two scripts</a> (or cloning the whole PCSX-Redux repository).</p>
<div class="fragment"><div class="line">brew install ./tools/macos-mips/mipsel-none-elf-binutils.rb</div>
<div class="line">brew install ./tools/macos-mips/mipsel-none-elf-gcc.rb</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md59"></a>
Windows</h2>
<p>It is possible to install a mips toolchain on Windows by first running the following command:</p>
<div class="fragment"><div class="line">powershell -c &quot;&amp; { iwr -UseBasicParsing https://raw.githubusercontent.com/grumpycoders/pcsx-redux/main/mips.ps1 | iex }&quot;</div>
</div><!-- fragment --><p>The computer might need to be rebooted after the installation of this script.</p>
<p>Next, run the following command to install the proper toolchain and its dependencies:</p>
<div class="fragment"><div class="line">mips install 14.2.0</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md60"></a>
Docker</h2>
<p>For users who don't want to modify their environments, it is possible to use <a href="https://www.docker.com/">Docker</a> to run the mips toolchain. There are two scripts provided at the root of this repository, called <code>dockermake.sh</code> for Unix users and <code>dockermake.bat</code> for Windows users.</p>
<p>These scripts will behave like the <code>make</code> command, running in the same directory where the command was run. It'll be in a Linux environment with an adequate mips toolchain to use.</p>
<h1><a class="anchor" id="autotoc_md61"></a>
Creating a project.</h1>
<p>The canonical method to use <code>PSYQo</code> is to use the <a href="https://github.com/pcsx-redux/nugget">nugget</a> repository as a submodule for your own project, say in the <code>third_party</code> directory. You can create a <code><a class="el" href="../../d9/d29/hello_8cpp.html">hello.cpp</a></code> file at the root of your directory that's a copy of <a href="../../examples/hello/hello.cpp">the example hello world</a>. Doing a simple code drop of the nugget repository is also acceptable.</p>
<p>Here's how to get all this going. The commands are aimed at Unix environments, but the spirit of what's going on should be very simple to understand for Windows too.</p>
<p>First, let's create a folder for your project:</p>
<div class="fragment"><div class="line">mkdir hello</div>
<div class="line">cd hello</div>
</div><!-- fragment --><p>Then, initialize the git repository: </p><div class="fragment"><div class="line">git init</div>
</div><!-- fragment --><p>And then, let's add nugget as a submodule: </p><div class="fragment"><div class="line">git submodule add https://github.com/pcsx-redux/nugget.git third_party/nugget</div>
</div><!-- fragment --><p>Now, download <a href="../../examples/hello/hello.cpp">the example hello world</a> and drop it in your project folder.</p>
<p>Finally, create a <code>Makefile</code> at the root of your project, which follows the following structure:</p>
<div class="fragment"><div class="line"># The name of the binary to be created.</div>
<div class="line">TARGET = hello</div>
<div class="line"># The type of the binary to be created - ps-exe is most common.</div>
<div class="line">TYPE = ps-exe</div>
<div class="line"> </div>
<div class="line"># The list of sources files to compile within the binary.</div>
<div class="line">SRCS = \</div>
<div class="line">hello.cpp \</div>
<div class="line"> </div>
<div class="line"># Setting the minimum version of the C++. C++-20 is the minimum required version by PSYQo.</div>
<div class="line">CXXFLAGS = -std=c++20</div>
<div class="line"> </div>
<div class="line"># This will activate the PSYQo library and the rest of the toolchain.</div>
<div class="line">include third_party/nugget/psyqo/psyqo.mk</div>
</div><!-- fragment --><p>Once done, you can simply run <code>make</code> (or use the <code>dockermake</code> script) in your project root to create the application. This should create the binary called <code>hello.ps-exe</code>, which you can then run in the emulator of your choice, or on the real hardware using for example <a href="https://github.com/JonathanDotCel/unirom8_bootdisc_and_firmware_for_ps1">unirom</a> and <a href="https://github.com/JonathanDotCel/NOTPSXSerial">nops</a>.</p>
<p>See the [examples](examples) directory for more complex project structures you can use. Since the examples are subfolders of the psyqo library, their <code>Makefile</code>s will have a different method to include the file <code>psyqo.mk</code>, but that's otherwise the only difference.</p>
<p>If a more complex build system is required, compiling PSYQo itself is very simple, and should be straightforward to integrate. Refer to the [Makefile](Makefile) for what to do exactly.</p>
<h1><a class="anchor" id="autotoc_md62"></a>
IDE integration</h1>
<p>The recommended IDE is <a href="https://code.visualstudio.com/">Visual Studio Code</a>. The <a href="https://marketplace.visualstudio.com/items?itemName=llvm-vs-code-extensions.vscode-clangd">clangd</a> extension is configured within PSYQo, and will provide valuable IDE features such as completion or code navigation. It is also possible to debug PSYQo binaries, using the <a href="https://marketplace.visualstudio.com/items?itemName=webfreak.debug">Native Debug</a> extension. See the <a href="https://github.com/grumpycoders/pcsx-redux/blob/main/.vscode/launch.json">PCSX-Redux's launch.json</a> for some examples.</p>
<h1><a class="anchor" id="autotoc_md63"></a>
Build options</h1>
<p>When using the <code>psyqo.mk</code> file, you can specify build options for the PSYQo library and your binary. It is possible to specify the following options:</p>
<ul>
<li><code>make BUILD=Release</code> <br  />
 This is the default build, and will enable a release build of the library and your binary. It will be fast and small, but debugging will be hard.</li>
<li><code>make BUILD=Debug</code> <br  />
 This will enable a full debug build of the library and your binary. It will be slow and bloated, but debugging will be very easy.</li>
<li><code>make BUILD=SmallDebug</code> <br  />
 This will enable a debug build of the library and your binary with still some optimizations. Debugging is possible, but will be hindered at times. It is the best compromise if debugging is needed while retaining some speed and small code footprint.</li>
<li><code>make BUILD=LTO</code> <br  />
 This will enable a release build of the library and your binary with <a href="https://gcc.gnu.org/wiki/LinkTimeOptimization">LTO</a> enabled. It will be really fast and really small, but debugging will be impossible.</li>
</ul>
<h1><a class="anchor" id="autotoc_md64"></a>
Further reading</h1>
<p>Moving on to the <a class="el" href="../../de/d6e/md_psyqo_2CONCEPTS.html">Concepts</a> page is the next step in understanding how the library functions. The library itself is also thoroughly documented, and the <a href="https://pcsx-redux.github.io/nugget/">nugget website</a> has a render of the doxygen documentation.</p>
<p>To discuss PlayStation1's development, hacking, and reverse engineering in general, please join the PSX.Dev Discord server: <a href="https://discord.gg/QByKPpH"><img src="https://img.shields.io/discord/642647820683444236" alt="Discord" class="inline"/></a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
